import{c as b,u as $,r as n,A as o,j as e,b as A,H as w,L as N}from"./index-qtsJ8Jwt.js";import{a as i}from"./index-B9ygI19o.js";import{R as y}from"./RatingStars-DIQsDws5.js";import{A as L,b as R,C as S}from"./seo-DdhqczzN.js";const p="/images/default-cover.jpg";function U(){console.log("PersonalArticle render");const{slug:a}=b(),c=$();c.state?.allArticles;const u=Number(new URLSearchParams(c.search).get("page"))||1,l=window.location.origin,[t,m]=n.useState(null),[f,g]=n.useState(!0),[j,x]=n.useState(0);if(n.useEffect(()=>{if(!a)return;let s=!1;return g(!0),window.scrollTo({top:0}),i.get(`${o}/posts/${a}`).then(d=>{s||m(d.data?.slug?d.data:null)}).catch(()=>{s||m(null)}).finally(()=>{s||g(!1)}),()=>{s=!0}},[a]),n.useEffect(()=>{a&&i.get(`${o}/ratings?slug=${a}`).then(s=>{typeof s.data?.rating=="number"&&x(s.data.rating)}).catch(()=>{})},[a]),f)return e.jsx(L,{});if(!t)return e.jsx("p",{className:"text-center py-20 opacity-60",children:"Articolul nu există."});const r=R({title:`${t.title} – Personal Blog`,description:t.subtitle||t.content?.replace(/<[^>]+>/g,"").slice(0,160),image:A(t.cover,p),url:`${l}/personal/${t.slug}`}),h=u>1?`${l}/personal/${t.slug}?page=${u}`:`${l}/personal/${t.slug}`;return e.jsxs(e.Fragment,{children:[e.jsxs(w,{htmlAttributes:{lang:"ro"},children:[e.jsx("title",{children:r.title}),e.jsx("meta",{name:"description",content:r.description}),e.jsx("link",{rel:"canonical",href:h}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs("article",{className:"max-w-3xl mx-auto px-4 py-10",children:[e.jsxs("nav",{className:"mb-6 text-sm opacity-70",children:[e.jsx(N,{to:"/personal",children:"Blog Personal"})," →"," ",e.jsx("span",{className:"opacity-50",children:t.title})]}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:t.title}),e.jsx("img",{src:r.image,className:"w-full h-80 object-cover rounded-2xl mb-10",onError:s=>s.currentTarget.src=p}),e.jsx("div",{className:"prose max-w-none mb-12",dangerouslySetInnerHTML:{__html:t.content}}),e.jsx("div",{className:"mb-14",children:e.jsx(y,{value:j,onRate:s=>{x(s),i.post(`${o}/ratings`,{slug:a,rating:s})}})}),e.jsx(S,{slug:t.slug})]})]})}export{U as default};
